<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="snackMapper">
	<resultMap type="Snack" id="snackResultSet">
		<id property="" column="" />
		<result property="snackNo" column="SNACK_NO" />
		<result property="snackName" column="SNACK_NAME" />
		<result property="snackPrice" column="SNACK_PRICE" />
		<result property="snackMemo" column="SNACK_MEMO" />
		<result property="snackStatus" column="SNACK_STATUS" />
		<result property="sCateNo" column="S_CATE_NO" />
		<result property="sCateName" column="S_CATE_NAME" />
		
		<association property="attachment" javaType="Attachment">
			<result property="fileNo" column="FILE_NO" />
			<result property="sortCode" column="SORT_CODE" />
			<result property="filePath" column="FILE_PATH" />
			<result property="originFileName" column="ORIGIN_FILENAME" />
			<result property="renameFileName" column="RENAME_FILENAME" />
			<result property="fileStatus" column="FILE_STATUS" />
			<result property="movieNo" column="MOVIE_NO" />
			<result property="userNo" column="USER_NO" />
			<result property="snackNo" column="SNACK_NO" />
			<result property="goodsNo" column="GOODS_NO" />
		</association>
	</resultMap>
	
	<select id="selectList" resultMap="snackResultSet">
		SELECT *
		FROM SNACK
		WHERE S_STATUS='Y'
		ORDER BY SNACK_NO DESC 
	</select>
	
	<insert id="insertSnack" parameterType="Sanck">
		INSERT INTO SNACK
		VALUES(SEQ_SNACK_NO.NEXTVAL, #{snackName}, #{snackPrice}, #{snackMemo}, DEFAULT, #{sCateNo})
		
	</insert>
	
	<insert id="insertSnackImg" parameterType="Attachment">
		INSERT INTO ATTACHMENT
		(FILE_NO, SORT_CODE, FILE_PATH, ORIGIN_FILENAME, RENAME_FILENAME, FILE_STATUS, MOVIE_NO, USER_NO, SNACK_NO, GOODS_NO)
	 	VALUES(SEQ_FILE_NO.NEXTVAL, 50, #{filePath}, #{originFileName}, #{renameFileName}, DEFAULT, NULL, NULL, #{snackNo}, NULL)
	</insert>
  
</mapper>
